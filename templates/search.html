{% extends 'base.html' %}
{% load static %}
{% block title %}Search Results{% endblock  %}
{% block content %}
<link rel="stylesheet" href="{% static 'books/css/search.css' %}">

<header>
    <h1>Search Results</h1>
</header>

<main>
    <div class="search-container">
        <form action="{% url 'books:search' %}" method="GET">
            <input type="text" name="query" placeholder="Поиск книг..." required>
            <button type="submit"><i class="bi bi-search"></i></button>
        </form>
    </div>

    <section id="results">
        {% if book_results %}
        <h2>Books</h2>
        <ul>
            {% for book in book_results %}
            <li>
                <strong>{{ book.title }}</strong>
                <p>{{ book.author }} - {{ book.publication_date }}</p>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p>No books found.</p>
        {% endif %}

        {% if author_results %}
        <h2>Authors</h2>
        <ul>
            {% for author in author_results %}
            <li>
                <strong>{{ author.first_name }} {{ author.last_name }}</strong>
                <p>Books: {% for book in author.books.all %}{{ book.title }}{% if not forloop.last %}, {% endif %}{% endfor %}</p>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p>No authors found.</p>
        {% endif %}
    </section>
</main>
{% endblock %}
